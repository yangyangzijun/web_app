{% extends 'base.html' %}


{% block footer %}
<html>
<body>

<form id="login_form">
    <div class="containter">
        <div class="row">
            <div class="col-xs-4 col-xs-offset-4">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">登录</h3>
                    </div>

    <div class="form-group">
      <label for="disabledTextInput">用户名</label>
      <input type="text" id="disabledTextInput" class="form-control" name="username" >
    </div>
   <div class="form-group">
      <label for="disabledTextInput">密码</label>
      <input type="text" id="disabledTextInput" class="form-control" name="passwd" >
       <button type="button"  id="saveUserInfo" class="btn btn-primary pull-right">登录</button>


    </div>
<br>
                    <br>
    <div>

                    </div>








                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
    </body>
</html>
    <script>
   $("#saveUserInfo").click(function(){

        var formObject = {};
        var formArray =$("#login_form").serializeArray();
        $.each(formArray,function(i,item){
            formObject[item.name] = item.value;
        });
        $.ajax({
            url:"/login",
            type:"post",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(formObject),
            dataType: "json",
             success:function(data){ //后端返回的json数据（此处data为json对象）
                if(data.mess=='ok')
                {
                    window.location.href="/";
                }
              else
                {
                    alert(data.mess)
                }

          },
            error:function(e){
                alert("错误！！");
            }
        });
    });

    </script>
{% endblock %}

